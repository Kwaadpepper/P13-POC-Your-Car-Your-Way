#!/usr/bin/env sh
# Valide le message de commit avec commitlint depuis le dossier frontend
REPO_ROOT="$(git rev-parse --show-toplevel)"
GIT_DIR="$(git rev-parse --absolute-git-dir)"

MSG_FILE="$1"
[ -f "$MSG_FILE" ] || MSG_FILE="$GIT_DIR/COMMIT_EDITMSG"

cd "$REPO_ROOT/frontend" || exit 1

echo "Husky (commit-msg): commitlint avec scopes dynamiques"
npx --no-install commitlint --config commitlint.config.js --edit "$MSG_FILE"
